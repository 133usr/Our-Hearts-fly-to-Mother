{"version":3,"file":"itowns_widgets.js","mappings":"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","sources":["webpack://itowns/webpack/universalModuleDefinition","webpack://itowns/./src/Utils/gui/Widget.js","webpack://itowns/./src/Utils/gui/Navigation.js","webpack://itowns/./src/Utils/gui/Minimap.js","webpack://itowns/./src/Utils/gui/Scale.js","webpack://itowns/./src/Utils/gui/Searchbar.js","webpack://itowns/./src/Utils/gui/C3DTilesStyle.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"itowns_widgets\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"itowns_widgets\"] = factory();\n\telse\n\t\troot[\"itowns_widgets\"] = factory();\n})(self, () => {\nreturn ","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _classPrivateFieldSet from \"@babel/runtime/helpers/classPrivateFieldSet\";\nimport _classPrivateFieldGet from \"@babel/runtime/helpers/classPrivateFieldGet\";\nfunction _classPrivateFieldInitSpec(obj, privateMap, value) { _checkPrivateRedeclaration(obj, privateMap); privateMap.set(obj, value); }\nfunction _checkPrivateRedeclaration(obj, privateCollection) { if (privateCollection.has(obj)) { throw new TypeError(\"Cannot initialize the same private elements twice on an object\"); } }\nvar _display = /*#__PURE__*/new WeakMap();\n/**\n * An interface that stores common methods for all specific widgets.\n *\n * @hideconstructor\n */\nvar Widget = /*#__PURE__*/function () {\n  function Widget(view) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var defaultOptions = arguments.length > 2 ? arguments[2] : undefined;\n    _classCallCheck(this, Widget);\n    _classPrivateFieldInitSpec(this, _display, {\n      writable: true,\n      value: void 0\n    });\n    this.parentElement = options.parentElement || view.domElement;\n    this.position = options.position || defaultOptions.position;\n    if (!['top-left', 'top-right', 'bottom-left', 'bottom-right', 'top', 'bottom', 'left', 'right'].includes(this.position)) {\n      console.warn('\\'position\\' optional parameter for \\'Widget\\' constructor is not a valid option. ' + \"It will be set to '\".concat(defaultOptions.position, \"'.\"));\n      this.position = defaultOptions.position;\n    }\n\n    // ---------- CREATE A DomElement WITH id, classes AND style RELEVANT TO THE WIDGET PROPERTIES : ----------\n\n    // Create a div containing minimap widget and add it to its specified parent.\n    this.domElement = document.createElement('div');\n    this.parentElement.appendChild(this.domElement);\n\n    // Size widget according to options.\n    this.domElement.style.width = \"\".concat(options.width || options.size || defaultOptions.width, \"px\");\n    this.domElement.style.height = \"\".concat(options.height || options.size || defaultOptions.height, \"px\");\n\n    // Position widget according to options.\n    var positionArray = this.position.split('-');\n    this.domElement.classList.add(\"\".concat(positionArray[0], \"-widget\"));\n    if (positionArray[1]) {\n      this.domElement.classList.add(\"\".concat(positionArray[1], \"-widget\"));\n    } else {\n      // If only one position parameter was given, center the domElement on the other axis.\n      // TODO : at this stage, offsetWidth and offsetHeight do no include borders. This should be worked around.\n      switch (positionArray[0]) {\n        case 'top':\n        case 'bottom':\n          this.domElement.style.left = \"calc(50% - \".concat(this.domElement.offsetWidth / 2, \"px)\");\n          break;\n        case 'left':\n        case 'right':\n          this.domElement.style.top = \"calc(50% - \".concat(this.domElement.offsetHeight / 2, \"px)\");\n          break;\n        default:\n          break;\n      }\n    }\n\n    // Translate widget div according to optional translate parameter.\n    if (options.translate) {\n      this.domElement.style.transform = \"translate(\".concat(options.translate.x || 0, \"px, \").concat(options.translate.y || 0, \"px)\");\n    }\n\n    // Prevent triggering `GlobeControls` and `PlanarControls` mouse or pointer events when clicking the search bar.\n    // For example, this prevents triggering an animated travel when double-clicking search bar in a `GlobeView`.\n    this.domElement.addEventListener('pointerdown', function (e) {\n      e.stopPropagation();\n    });\n    this.domElement.addEventListener('mousedown', function (e) {\n      e.stopPropagation();\n    });\n  }\n\n  /**\n   * Change the widget style `display` property so that the widget becomes visible.\n   */\n  _createClass(Widget, [{\n    key: \"show\",\n    value: function show() {\n      this.domElement.style.display = _classPrivateFieldGet(this, _display);\n    }\n\n    /**\n     * Change the widget style `display` property so that the widget becomes invisible.\n     */\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      _classPrivateFieldSet(this, _display, window.getComputedStyle(this.domElement).display);\n      this.domElement.style.display = 'none';\n    }\n  }]);\n  return Widget;\n}();\nexport default Widget;","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _classPrivateFieldSet from \"@babel/runtime/helpers/classPrivateFieldSet\";\nimport _classPrivateFieldGet from \"@babel/runtime/helpers/classPrivateFieldGet\";\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction _classPrivateMethodInitSpec(obj, privateSet) { _checkPrivateRedeclaration(obj, privateSet); privateSet.add(obj); }\nfunction _classPrivateFieldInitSpec(obj, privateMap, value) { _checkPrivateRedeclaration(obj, privateMap); privateMap.set(obj, value); }\nfunction _checkPrivateRedeclaration(obj, privateCollection) { if (privateCollection.has(obj)) { throw new TypeError(\"Cannot initialize the same private elements twice on an object\"); } }\nfunction _classPrivateMethodGet(receiver, privateSet, fn) { if (!privateSet.has(receiver)) { throw new TypeError(\"attempted to get private field on non-instance\"); } return fn; }\nimport { VIEW_EVENTS } from \"../../Core/View\";\nimport Widget from \"./Widget\";\nvar DEFAULT_OPTIONS = {\n  displayCompass: true,\n  display3DToggle: true,\n  displayZoomIn: true,\n  displayZoomOut: true,\n  animationDuration: 500,\n  position: 'bottom-left',\n  direction: 'column'\n};\nvar DEFAULT_BUTTONS = {\n  compass: {\n    id: 'compass',\n    content: '',\n    info: 'Rotate the camera to face North',\n    parentId: 'widgets'\n  },\n  toggle3D: {\n    id: '3d-button',\n    content: '3D',\n    info: 'Tilt the camera'\n  },\n  zoomIn: {\n    id: 'zoom-in-button',\n    content: '<span class=\"widget-zoom-button-logo\"></span>',\n    info: 'Zoom in',\n    parentId: 'zoom-button-bar'\n  },\n  zoomOut: {\n    id: 'zoom-out-button',\n    content: '<span id=\"zoom-out-logo\" class=\"widget-zoom-button-logo\"></span>',\n    info: 'Zoom out',\n    parentId: 'zoom-button-bar'\n  }\n};\n\n/**\n * A widget menu manager for navigation.\n *\n * To use it, you need to link the widgets' stylesheet to your html webpage. This stylesheet is included in\n * [itowns bundles](https://github.com/iTowns/itowns/releases) if you downloaded them, or it can be found in\n * `node_modules/itowns/examples/css` if you installed iTowns with npm. Otherwise, it can be found at\n * [this link](https://raw.githubusercontent.com/iTowns/itowns/master/examples/css/widgets.css). See\n * [this example](http://www.itowns-project.org/itowns/examples/#widgets_navigation) for more details.\n *\n * @extends Widget\n *\n * @property {HTMLElement}          domElement      An html div containing all navigation widgets.\n * @property {HTMLElement}          parentElement   The parent HTML container of `this.domElement`.\n * @property {HTMLButtonElement}    compass         The HTML button for the compass.\n * @property {HTMLButtonElement}    toggle3D        The HTML button for the 3D/2D toggle button.\n * @property {HTMLButtonElement}    zoomIn          The HTML button for the zoom-in button.\n * @property {HTMLButtonElement}    zoomOut         The HTML button for the zoom-out button.\n *\n * @example\n * // Create a Navigation widget in the bottom-right corner of an iTowns view domElement\n * const navigation = new Navigation(view, { position: 'bottom-right' };\n *\n * // Change the tooltip for the compass :\n * navigation.compass.title = 'new tooltip';\n *\n * // Change the method ran when clicking zoom-in button :\n * function newMethod() {\n *     // do something\n * }\n * navigation.zoomIn.onclick = newMethod;\n */\nvar _view = /*#__PURE__*/new WeakMap();\nvar _action = /*#__PURE__*/new WeakSet();\nvar _addDefaultButton = /*#__PURE__*/new WeakSet();\nvar Navigation = /*#__PURE__*/function (_Widget) {\n  _inherits(Navigation, _Widget);\n  var _super = _createSuper(Navigation);\n  /**\n   * @param   {GlobeView}     view                                    The iTowns view the navigation should be linked\n                                                                      * to. For the moment, only `{@link GlobeView}`\n                                                                      * is supported.\n   * @param   {Object}        options                                 The navigation menu optional configuration.\n   * @param   {HTMLElement}   [options.parentElement=view.domElement] The parent HTML container of the div which\n                                                                      * contains navigation widgets.\n   * @param   {boolean}       [options.displayCompass=true]           Whether the compass widget should be displayed.\n   * @param   {boolean}       [options.display3DToggle=true]          Whether the navigation should include a widget\n                                                                      * to toggle between top and oblique view.\n   * @param   {boolean}       [options.displayZoomIn=true]            Whether the zoom-in widget should be displayed.\n   * @param   {boolean}       [options.displayZoomOut=true]           Whether the zoom-out widget should be displayed.\n   * @param   {number}        [options.animationDuration=500]         The duration of travel animations, when clicking\n                                                                      * navigation widgets.\n   * @param   {string}        [options.position='bottom-left']        Defines which corner of the `parentElement` the\n                                                                      * navigation menu should be displayed to.\n                                                                      * Possible values are `top-left`, `top-right`,\n                                                                      * `bottom-left` and `bottom-right`. If the input\n                                                                      * value does not match one of these, it will be\n                                                                      * defaulted to `bottom-left`.\n   * @param   {string}        [options.direction='column']            Whether the navigation menu should expand\n                                                                      * horizontally or vertically. Possible values\n                                                                      * are `column` and `row`. If the input value\n                                                                      * does not match one of these, it will be\n                                                                      * defaulted to `column`.\n   * @param   {Object}        [options.translate]                     An optional translation of the navigation menu.\n   * @param   {number}        [options.translate.x=0]                 The navigation menu translation along the page\n                                                                      * x-axis.\n   * @param   {number}        [options.translate.y=0]                 The navigation menu translation along the page\n                                                                      * y-axis.\n   */\n  function Navigation(view) {\n    var _options$displayCompa, _options$display3DTog, _options$displayZoomI, _options$displayZoomO;\n    var _this;\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    _classCallCheck(this, Navigation);\n    // ---------- BUILD PROPERTIES ACCORDING TO DEFAULT OPTIONS AND OPTIONS PASSED IN PARAMETERS : ----------\n\n    // Check if the view is supported.\n    if (!view.isGlobeView) {\n      throw new Error('\\'Navigation\\' plugin only supports \\'GlobeView\\'. Therefore, the \\'view\\' parameter must be a ' + '\\'GlobeView\\'.');\n    }\n\n    // `top`, `bottom`, `left` and `right` values for `position` option are not relevant for navigation widget.\n    if (['top', 'bottom', 'left', 'right'].includes(options.position)) {\n      console.warn('\\'position\\' optional parameter for \\'Navigation\\' is not a valid option. ' + \"It will be set to '\".concat(DEFAULT_OPTIONS.position, \"'.\"));\n      options.position = DEFAULT_OPTIONS.position;\n    }\n    _this = _super.call(this, view, options, DEFAULT_OPTIONS);\n    _classPrivateMethodInitSpec(_assertThisInitialized(_this), _addDefaultButton);\n    _classPrivateMethodInitSpec(_assertThisInitialized(_this), _action);\n    _classPrivateFieldInitSpec(_assertThisInitialized(_this), _view, {\n      writable: true,\n      value: void 0\n    });\n    _classPrivateFieldSet(_assertThisInitialized(_this), _view, view);\n    _this.direction = options.direction || DEFAULT_OPTIONS.direction;\n    if (!['column', 'row'].includes(_this.direction)) {\n      console.warn('\\'direction\\' optional parameter for \\'Navigation\\' constructor is not a valid option. ' + \"It will be set to '\".concat(DEFAULT_OPTIONS.direction, \"'.\"));\n      _this.direction = DEFAULT_OPTIONS.direction;\n    }\n    _this.animationDuration = options.animationDuration === undefined ? DEFAULT_OPTIONS.animationDuration : options.animationDuration;\n\n    // ---------- CREATE A DomElement WITH id AND classes RELEVANT TO THE WIDGET PROPERTIES : ----------\n\n    // Create a div containing all widgets and add it to its specified parent.\n    _this.domElement.id = 'widgets-navigation';\n\n    // Position widget div according to options.\n    _this.domElement.classList.add(\"\".concat(_this.direction, \"-widget\"));\n\n    // ---------- CREATE THE DEFAULT WIDGETS IF NOT HIDDEN (COMPASS, 3D AND ZOOM BUTTONS) : ----------\n\n    // Add a compass widget if requested.\n    if ((_options$displayCompa = options.displayCompass) !== null && _options$displayCompa !== void 0 ? _options$displayCompa : DEFAULT_OPTIONS.displayCompass) {\n      _this.compass = _classPrivateMethodGet(_assertThisInitialized(_this), _addDefaultButton, _addDefaultButton2).call(_assertThisInitialized(_this), DEFAULT_BUTTONS.compass, function () {\n        _classPrivateMethodGet(_assertThisInitialized(_this), _action, _action2).call(_assertThisInitialized(_this), {\n          heading: 0,\n          tilt: 89.5\n        });\n      });\n\n      // Manage compass rotation when the view's camera is moved.\n      view.addEventListener(VIEW_EVENTS.CAMERA_MOVED, function (event) {\n        _this.compass.style.transform = \"rotate(\".concat(-event.heading, \"deg)\");\n      });\n    }\n\n    // Add a 3D toggle button if requested.\n    if ((_options$display3DTog = options.display3DToggle) !== null && _options$display3DTog !== void 0 ? _options$display3DTog : DEFAULT_OPTIONS.display3DToggle) {\n      _this.toggle3D = _classPrivateMethodGet(_assertThisInitialized(_this), _addDefaultButton, _addDefaultButton2).call(_assertThisInitialized(_this), DEFAULT_BUTTONS.toggle3D, function () {\n        _classPrivateMethodGet(_assertThisInitialized(_this), _action, _action2).call(_assertThisInitialized(_this), {\n          tilt: _classPrivateFieldGet(_assertThisInitialized(_this), _view).controls.getTilt() < 89 ? 89.5 : 40\n        });\n      });\n\n      // Manage button content toggle when the view's camera is moved.\n      view.addEventListener(VIEW_EVENTS.CAMERA_MOVED, function (event) {\n        _this.toggle3D.innerHTML = event.tilt < 89 ? '2D' : '3D';\n      });\n    }\n\n    // Add a zoom-in button if requested.\n    if ((_options$displayZoomI = options.displayZoomIn) !== null && _options$displayZoomI !== void 0 ? _options$displayZoomI : DEFAULT_OPTIONS.displayZoomIn) {\n      _this.zoomIn = _classPrivateMethodGet(_assertThisInitialized(_this), _addDefaultButton, _addDefaultButton2).call(_assertThisInitialized(_this), DEFAULT_BUTTONS.zoomIn, function () {\n        _classPrivateMethodGet(_assertThisInitialized(_this), _action, _action2).call(_assertThisInitialized(_this), {\n          zoom: Math.min(20, _classPrivateFieldGet(_assertThisInitialized(_this), _view).controls.getZoom() + 1)\n        });\n      });\n    }\n\n    // Add a zoom-out button if requested.\n    if ((_options$displayZoomO = options.displayZoomOut) !== null && _options$displayZoomO !== void 0 ? _options$displayZoomO : DEFAULT_OPTIONS.displayZoomOut) {\n      _this.zoomOut = _classPrivateMethodGet(_assertThisInitialized(_this), _addDefaultButton, _addDefaultButton2).call(_assertThisInitialized(_this), DEFAULT_BUTTONS.zoomOut, function () {\n        _classPrivateMethodGet(_assertThisInitialized(_this), _action, _action2).call(_assertThisInitialized(_this), {\n          zoom: Math.max(3, _classPrivateFieldGet(_assertThisInitialized(_this), _view).controls.getZoom() - 1)\n        });\n      });\n    }\n    return _this;\n  }\n\n  /**\n   *\n   * @param   {string}    id              The unique id the created button should be given.\n   * @param   {string}    [content='']    An HTML string defining the content of the button.\n   * @param   {string}    [title='']      An HTML string defining information on the button. This string will be\n                                          * displayed in a tooltip when hovering the button.\n   * @param   {function}  [onclick] The method that should be executed when the button is clicked on.\n   * @param   {string}    [parentId]      The unique id of a button bar in which the created button should be added.\n                                          * A button bar is a group which contains one or several buttons. All\n                                          * buttons created with Navigation are in a button bar. If the given id does\n                                          * not match an already existing button bar, a new button bar will be created\n                                          * with this id. If no id is given, a button bar will be created with no id.\n                                          * The later case can be useful for creating isolated buttons.\n   *\n   * @returns {HTMLButtonElement}     The created button.\n   */\n  _createClass(Navigation, [{\n    key: \"addButton\",\n    value: function addButton(id) {\n      var _this2 = this;\n      var content = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n      var title = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n      var onclick = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : function () {};\n      var parentId = arguments.length > 4 ? arguments[4] : undefined;\n      var buttonBar = document.getElementById(parentId);\n      if (!buttonBar) {\n        buttonBar = this.addButtonBar(parentId);\n      }\n      var button = document.createElement('button');\n      button.className = 'widget-button';\n      button.id = id;\n      button.innerHTML = content;\n      button.title = title;\n      button.onclick = onclick;\n      buttonBar.appendChild(button);\n\n      // The buttons must not be focused using tab key.\n      button.tabIndex = -1;\n      // When releasing the mouse after clicking the button, we give the focus back to the view. Therefore, we can use\n      // key events on the view without having to click the view to grant it focus.\n      window.addEventListener('pointerup', function () {\n        if (document.activeElement === button) {\n          _classPrivateFieldGet(_this2, _view).domElement.focus();\n        }\n      });\n      return button;\n    }\n  }, {\n    key: \"addButtonBar\",\n    value: function addButtonBar(id) {\n      var buttonBar = document.createElement('div');\n      buttonBar.className = 'widget-button-bar';\n      if (id) {\n        buttonBar.id = id;\n      }\n      this.domElement.appendChild(buttonBar);\n      return buttonBar;\n    }\n  }]);\n  return Navigation;\n}(Widget);\nfunction _action2(params) {\n  params.time = this.animationDuration;\n  return _classPrivateFieldGet(this, _view).controls.lookAtCoordinate(params);\n}\nfunction _addDefaultButton2(settings, onclick) {\n  return this.addButton(settings.id, settings.content, settings.info, onclick, settings.parentId);\n}\nexport default Navigation;","import _createClass from \"@babel/runtime/helpers/createClass\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nimport Coordinates from \"../../Core/Geographic/Coordinates\";\nimport { MAIN_LOOP_EVENTS } from \"../../Core/MainLoop\";\nimport PlanarView from \"../../Core/Prefab/PlanarView\";\nimport { CAMERA_TYPE } from \"../../Renderer/Camera\";\nimport Widget from \"./Widget\";\nvar DEFAULT_OPTIONS = {\n  minScale: 1 / 500000,\n  maxScale: 1 / 5E8,\n  zoomRatio: 1 / 30,\n  width: 150,\n  height: 150,\n  position: 'bottom-left'\n};\n\n/**\n * A widget for minimap\n *\n * To use it, you need to link the widgets' stylesheet to your html webpage. This stylesheet is included in\n * [itowns bundles](https://github.com/iTowns/itowns/releases) if you downloaded them, or it can be found in\n * `node_modules/itowns/examples/css` if you installed iTowns with npm. Otherwise, it can be found at\n * [this link](https://raw.githubusercontent.com/iTowns/itowns/master/examples/css/widgets.css). See\n * [this example](http://www.itowns-project.org/itowns/examples/#widgets_minimap) for more details.\n *\n * @extends Widget\n *\n * @property    {HTMLElement}   domElement      An html div containing the minimap.\n * @property    {HTMLElement}   parentElement   The parent HTML container of `this.domElement`.\n */\nvar Minimap = /*#__PURE__*/function (_Widget) {\n  _inherits(Minimap, _Widget);\n  var _super = _createSuper(Minimap);\n  /**\n   * @param   {GlobeView}             view                                    The iTowns view the minimap should be\n                                                                              * linked to. Only {@link GlobeView} is\n                                                                              * supported at the moment.\n   * @param   {ColorLayer}            layer                                   The {@link ColorLayer} that should be\n                                                                              * displayed on the minimap.\n   * @param   {Object}                [options]                               The minimap optional configuration.\n   * @param   {HTMLElement}           [options.parentElement=view.domElement] The parent HTML container of the div\n                                                                              * which contains minimap widgets.\n   * @param   {number}                [options.size]                          The size of the minimap. It is a number\n                                                                              * that describes both width and height\n                                                                              * in pixels of the minimap.\n   * @param   {number}                [options.width=150]                     The width in pixels of the minimap.\n   * @param   {number}                [options.height=150]                    The height in pixels of the minimap.\n   * @param   {string}                [options.position='bottom-left']        Defines which position within the\n                                                                              * `parentElement` the minimap should be\n                                                                              * displayed to. Possible values are\n                                                                              * `top`, `bottom`, `left`, `right`,\n                                                                              * `top-left`, `top-right`, `bottom-left`\n                                                                              * and `bottom-right`. If the input value\n                                                                              * does not match one of these, it will\n                                                                              * be defaulted to `bottom-left`.\n   * @param   {Object}                [options.translate]                     An optional translation of the minimap.\n   * @param   {number}                [options.translate.x=0]                 The minimap translation along the page\n                                                                              * x-axis.\n   * @param   {number}                [options.translate.y=0]                 The minimap translation along the page\n                                                                              * y-axis.\n   * @param   {HTMLElement|string}    [options.cursor]                        An html element or an HTML string\n                                                                              * describing a cursor showing minimap\n                                                                              * view camera target position at the\n                                                                              * center of the minimap.\n   * @param   {number}                [options.minScale=1/2000]               The minimal scale the minimap can reach.\n   * @param   {number}                [options.maxScale=1/1_250_000]          The maximal scale the minimap can reach.\n   * @param   {number}                [options.zoomRatio=1/30]                The ratio between minimap camera zoom\n                                                                              * and view camera zoom.\n   * @param   {number}                [options.pitch=0.28]                    The screen pixel pitch, used to compute\n                                                                              * view and minimap scale.\n   */\n  function Minimap(view, layer) {\n    var _this;\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    _classCallCheck(this, Minimap);\n    // ---------- BUILD PROPERTIES ACCORDING TO DEFAULT OPTIONS AND OPTIONS PASSED IN PARAMETERS : ----------\n\n    if (!view.isGlobeView) {\n      throw new Error('\\'Minimap\\' plugin only supports \\'GlobeView\\'. Therefore, the \\'view\\' parameter must be a ' + '\\'GlobeView\\'.');\n    }\n    if (!layer.isColorLayer) {\n      throw new Error('\\'layer\\' parameter form \\'Minimap\\' constructor should be a \\'ColorLayer\\'.');\n    }\n    _this = _super.call(this, view, options, DEFAULT_OPTIONS);\n    _this.minScale = options.minScale || DEFAULT_OPTIONS.minScale;\n    _this.maxScale = options.maxScale || DEFAULT_OPTIONS.maxScale;\n\n    // TODO : it could be interesting to be able to specify a method as zoomRatio parameter. This method could\n    //  return a zoom ratio from the scale of the minimap.\n    _this.zoomRatio = options.zoomRatio || DEFAULT_OPTIONS.zoomRatio;\n\n    // ---------- this.domElement SETTINGS SPECIFIC TO MINIMAP : ----------\n\n    _this.domElement.id = 'widgets-minimap';\n\n    // Display a cursor at the center of the minimap, if requested.\n    if (options.cursor) {\n      // Wrap cursor domElement inside a div to center it in minimap.\n      var cursorWrapper = document.createElement('div');\n      cursorWrapper.id = 'cursor-wrapper';\n      _this.domElement.appendChild(cursorWrapper);\n\n      // Add specified cursor to its wrapper.\n      if (typeof options.cursor === 'string') {\n        cursorWrapper.innerHTML = options.cursor;\n      } else if (options.cursor instanceof HTMLElement) {\n        cursorWrapper.appendChild(options.cursor);\n      }\n    }\n\n    // ---------- CREATE A MINIMAP View AND DISPLAY DATA PASSED IN Layer PARAMETER : ----------\n\n    _this.view = new PlanarView(_this.domElement, layer.source.extent, {\n      camera: {\n        type: CAMERA_TYPE.ORTHOGRAPHIC\n      },\n      placement: layer.source.extent,\n      // TODO : the default placement should be the view extent for ortho camera\n      noControls: true,\n      maxSubdivisionLevel: view.tileLayer.maxSubdivisionLevel,\n      disableFocusOnStart: true\n    });\n    _this.view.addLayer(layer); // TODO : should this promise be returned by constructor so that user can use it ?\n\n    // Prevent the minimap domElement to get focus when clicked, and prevent click event to be propagated to the\n    // main view controls.\n    _this.domElement.addEventListener('pointerdown', function (event) {\n      event.preventDefault();\n    });\n\n    // Store minimap view camera3D in constant for code convenience.\n    var camera3D = _this.view.camera.camera3D;\n\n    // ---------- UPDATE MINIMAP VIEW WHEN UPDATING THE MAIN VIEW : ----------\n\n    // The minimal and maximal value the minimap camera3D zoom can reach in order to stay in the scale limits.\n    var initialScale = _this.view.getScale(options.pitch);\n    var minZoom = camera3D.zoom * _this.maxScale / initialScale;\n    var maxZoom = camera3D.zoom * _this.minScale / initialScale;\n\n    // Coordinates used to transform position vectors from the main view CRS to the minimap view CRS.\n    var mainViewCoordinates = new Coordinates(view.referenceCrs);\n    var viewCoordinates = new Coordinates(_this.view.referenceCrs);\n    var targetPosition = view.controls.getCameraTargetPosition();\n    view.addFrameRequester(MAIN_LOOP_EVENTS.AFTER_RENDER, function () {\n      // Update minimap camera zoom\n      var distance = view.camera.camera3D.position.distanceTo(targetPosition);\n      var scale = view.getScaleFromDistance(options.pitch, distance);\n      camera3D.zoom = _this.zoomRatio * maxZoom * scale / _this.minScale;\n      camera3D.zoom = Math.min(Math.max(camera3D.zoom, minZoom), maxZoom);\n      camera3D.updateProjectionMatrix();\n\n      // Update minimap camera position.\n      mainViewCoordinates.setFromVector3(view.controls.getCameraTargetPosition());\n      mainViewCoordinates.as(_this.view.referenceCrs, viewCoordinates);\n      camera3D.position.x = viewCoordinates.x;\n      camera3D.position.y = viewCoordinates.y;\n      camera3D.updateMatrixWorld(true);\n      _this.view.notifyChange(camera3D);\n    });\n    return _this;\n  }\n  return _createClass(Minimap);\n}(Widget);\nexport default Minimap;","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nimport { CONTROL_EVENTS } from \"../../Controls/GlobeControls\";\nimport { GLOBE_VIEW_EVENTS } from \"../../Core/Prefab/GlobeView\";\nimport { PLANAR_CONTROL_EVENT } from \"../../Controls/PlanarControls\";\nimport { VIEW_EVENTS } from \"../../Core/View\";\nimport Widget from \"./Widget\";\nvar DEFAULT_OPTIONS = {\n  width: 200,\n  height: 30,\n  position: 'bottom-left'\n};\n\n/**\n * A widget for scale\n *\n * To use it, you need to link the widgets' stylesheet to your html webpage. This stylesheet is included in\n * [itowns bundles](https://github.com/iTowns/itowns/releases) if you downloaded them, or it can be found in\n * `node_modules/itowns/examples/css` if you installed iTowns with npm. Otherwise, it can be found at\n * [this link](https://raw.githubusercontent.com/iTowns/itowns/master/examples/css/widgets.css). See\n * [this example](http://www.itowns-project.org/itowns/examples/#widgets_scale) for more details.\n *\n * @extends Widget\n *\n * @property    {HTMLElement}   domElement      An html div containing the scale.\n * @property    {HTMLElement}   parentElement   The parent HTML container of `this.domElement`.\n */\nvar Scale = /*#__PURE__*/function (_Widget) {\n  _inherits(Scale, _Widget);\n  var _super = _createSuper(Scale);\n  /**\n   * @param   {View}                  view                                    The iTowns view the scale should be\n                                                                              * linked to. If it is a\n                                                                              * {@link PlanarView} or a\n                                                                              * {@link GlobeView}, the scale will be\n                                                                              * automatically updated. Otherwise, user\n                                                                              * will need to implement the update\n                                                                              * automation using the `Scale.update`\n                                                                              * method.\n   * @param   {Object}                [options]                               The scale optional configuration.\n   * @param   {HTMLElement}           [options.parentElement=view.domElement] The parent HTML container of the div\n                                                                              * which contains scale widgets.\n   * @param   {number}                [options.width=200]                     The width in pixels of the scale.\n   * @param   {number}                [options.height=30]                     The height in pixels of the scale.\n   * @param   {string}                [options.position='bottom-left']        Defines which position within the\n                                                                              * `parentElement` the scale should be\n                                                                              * displayed to. Possible values are\n                                                                              * `top`, `bottom`, `left`, `right`,\n                                                                              * `top-left`, `top-right`, `bottom-left`\n                                                                              * and `bottom-right`. If the input value\n                                                                              * does not match one of these, it will\n                                                                              * be defaulted to `bottom-left`.\n   * @param   {Object}                [options.translate]                     An optional translation of the scale.\n   * @param   {number}                [options.translate.x=0]                 The scale translation along the page\n                                                                              * x-axis.\n   * @param   {number}                [options.translate.y=0]                 The scale translation along the page\n                                                                              * y-axis.\n   */\n  function Scale(view) {\n    var _this;\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    _classCallCheck(this, Scale);\n    // ---------- BUILD PROPERTIES ACCORDING TO DEFAULT OPTIONS AND OPTIONS PASSED IN PARAMETERS : ----------\n\n    _this = _super.call(this, view, options, DEFAULT_OPTIONS);\n\n    // ---------- this.domElement SETTINGS SPECIFIC TO SCALE : ----------\n\n    _this.domElement.id = 'widgets-scale';\n    _this.view = view;\n\n    // Initialize the text content of the scale, which will later be updated by a numerical value.\n    _this.domElement.innerHTML = 'Scale';\n    _this.width = options.width || DEFAULT_OPTIONS.width;\n    if (_this.view.isGlobeView) {\n      _this.view.addEventListener(GLOBE_VIEW_EVENTS.GLOBE_INITIALIZED, function () {\n        _this.update();\n      });\n      _this.view.controls.addEventListener(CONTROL_EVENTS.RANGE_CHANGED, function () {\n        _this.update();\n      });\n    } else if (_this.view.isPlanarView) {\n      _this.view.addEventListener(VIEW_EVENTS.INITIALIZED, function () {\n        _this.update();\n      });\n      _this.view.addEventListener(PLANAR_CONTROL_EVENT.MOVED, function () {\n        _this.update();\n      });\n    } else {\n      console.warn('The \\'view\\' linked to scale widget is neither a \\'GlobeView\\' nor a \\'PlanarView\\'. The ' + 'scale wont automatically update. You can implement its update automation using \\'Scale.update\\' ' + 'method.');\n    }\n    return _this;\n  }\n  _createClass(Scale, [{\n    key: \"addEventListeners\",\n    value: function addEventListeners() {}\n\n    /**\n     * Update the scale size and content according to view camera position.\n     */\n  }, {\n    key: \"update\",\n    value: function update() {\n      // Calculate the rounded metric distance which matches the scale width in pixels.\n      var metricDistance = Math.round(this.view.getPixelsToMeters(this.width));\n      var digit = Math.pow(10, metricDistance.toString().length - 1);\n      metricDistance = Math.round(metricDistance / digit) * digit;\n      var pixelDistance = this.view.getMetersToPixels(metricDistance);\n      var unit = 'm';\n      if (metricDistance >= 1000) {\n        metricDistance /= 1000;\n        unit = 'km';\n      }\n      this.domElement.innerHTML = \"\".concat(metricDistance, \" \").concat(unit);\n      this.domElement.style.width = \"\".concat(pixelDistance, \"px\");\n    }\n  }]);\n  return Scale;\n}(Widget);\nexport default Scale;","import _createClass from \"@babel/runtime/helpers/createClass\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _classPrivateFieldGet from \"@babel/runtime/helpers/classPrivateFieldGet\";\nimport _classPrivateFieldSet from \"@babel/runtime/helpers/classPrivateFieldSet\";\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction _classPrivateFieldInitSpec(obj, privateMap, value) { _checkPrivateRedeclaration(obj, privateMap); privateMap.set(obj, value); }\nfunction _checkPrivateRedeclaration(obj, privateCollection) { if (privateCollection.has(obj)) { throw new TypeError(\"Cannot initialize the same private elements twice on an object\"); } }\nimport Fetcher from \"../../Provider/Fetcher\";\nimport Widget from \"./Widget\";\nvar DEFAULT_OPTIONS = {\n  width: 300,\n  height: 38,\n  position: 'top',\n  maxSuggestionNumber: 10,\n  fontSize: 16,\n  placeholder: 'Search location'\n};\nfunction addActive(htmlElements, index) {\n  var _htmlElements$index;\n  if (!htmlElements) {\n    return index;\n  }\n  removeAllActives(htmlElements);\n  if (index >= htmlElements.length) {\n    index = 0;\n  } else if (index < 0) {\n    index = htmlElements.length - 1;\n  }\n  (_htmlElements$index = htmlElements[index]) === null || _htmlElements$index === void 0 ? void 0 : _htmlElements$index.classList.add('active');\n  return index;\n}\nfunction removeAllActives(htmlElements) {\n  for (var i = 0; i < htmlElements.length; i++) {\n    htmlElements[i].classList.remove('active');\n  }\n}\nfunction eraseSuggestionList(form) {\n  while (form.children.length > 1) {\n    form.removeChild(form.lastChild);\n  }\n}\n\n/**\n * A widget for searchbar\n *\n * To use it, you need to link the widgets' stylesheet to your html webpage. This stylesheet is included in\n * [itowns bundles](https://github.com/iTowns/itowns/releases) if you downloaded them, or it can be found in\n * `node_modules/itowns/examples/css` if you installed iTowns with npm. Otherwise, it can be found at\n * [this link](https://raw.githubusercontent.com/iTowns/itowns/master/examples/css/widgets.css). See\n * [this example](http://www.itowns-project.org/itowns/examples/#widgets_searchbar) for more details.\n *\n * @extends Widget\n *\n * @property    {HTMLElement}   domElement      An html div containing the searchbar.\n * @property    {HTMLElement}   parentElement   The parent HTML container of `this.domElement`.\n */\nvar _onSelected = /*#__PURE__*/new WeakMap();\nvar Searchbar = /*#__PURE__*/function (_Widget) {\n  _inherits(Searchbar, _Widget);\n  var _super = _createSuper(Searchbar);\n  /**\n   * @param   {View}          view                                    The iTowns view the searchbar should be linked\n                                                                      * to.\n   *\n   * @param   {Object}        geocodingOptions                        Configuration for geocoding.\n   * @param   {URL}           geocodingOptions.url                    The URL of a geocoding service that should be\n                                                                      * used to build suggestions.\n   * @param   {function}      geocodingOptions.parser                 A method to parse fetched results from geocoding\n                                                                      * url into a Map object. For each entry of this\n                                                                      * Map, the key must be a string that will be\n                                                                      * displayed as the html content of each\n                                                                      * suggestion bellow the searchbar. The value\n                                                                      * associated to the key is whatever the user\n                                                                      * wants. The value is the parameter that is\n                                                                      * passed to the `onSelected` method (specified\n                                                                      * in another `geocodingOptions` parameter).\n   * @param   {function}      [geocodingOptions.onSelected]           A method which describes what should be done\n                                                                      * when user selects a location (by clicking or\n                                                                      * hitting enter on a suggestion). The only\n                                                                      * parameter of this method is the value mapped\n                                                                      * with `geocodingOptions.parser` method.\n   *\n   * @param   {Object}        [options]                               The searchbar optional configuration.\n   * @param   {HTMLElement}   [options.parentElement=view.domElement] The parent HTML container of the div which\n                                                                      * contains searchbar widgets.\n   * @param   {number}        [options.size]                          The size of the searchbar. It is a number that\n                                                                      * describes both width and height in pixels of\n                                                                      * the searchbar.\n   * @param   {number}        [options.width=300]                     The width in pixels of the searchbar.\n   * @param   {number}        [options.height=38]                     The height in pixels of the searchbar.\n   * @param   {string}        [options.position='top']                Defines which position within the\n                                                                      * `parentElement` the searchbar should be\n                                                                      * displayed to. Possible values are `top`,\n                                                                      * `bottom`, `left`, `right`, `top-left`,\n                                                                      * `top-right`, `bottom-left` and `bottom-right`.\n                                                                      * If the input value does not match one of\n                                                                      * these, it will be defaulted to `top`.\n   * @param   {Object}        [options.translate]                     An optional translation of the searchbar.\n   * @param   {number}        [options.translate.x=0]                 The searchbar translation along the page x-axis.\n   * @param   {number}        [options.translate.y=0]                 The searchbar translation along the page y-axis.\n   * @param   {number}        [options.fontSize=16]                   The font size in pixel of the searchbar content.\n   * @param   {number}        [options.maxSuggestionNumber=10]        The maximum number of suggestions that should\n                                                                      * appear under the searchbar.\n   * @param   {string}        [options.placeholder='Search location'] The placeholder that appears in the searchbar\n                                                                      * when nothing has yet been typed.\n   */\n  function Searchbar(view, geocodingOptions) {\n    var _geocodingOptions$onS;\n    var _this;\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    _classCallCheck(this, Searchbar);\n    // ---------- BUILD PROPERTIES ACCORDING TO DEFAULT OPTIONS AND OPTIONS PASSED IN PARAMETERS : ----------\n    _this = _super.call(this, view, options, DEFAULT_OPTIONS);\n\n    // Check if `geocodingOptions` parameter was correctly specified.\n    _classPrivateFieldInitSpec(_assertThisInitialized(_this), _onSelected, {\n      writable: true,\n      value: void 0\n    });\n    if (!geocodingOptions || !geocodingOptions.url || !geocodingOptions.parser || typeof geocodingOptions.parser !== 'function') {\n      throw new Error('\\'geocodingOptions\\' parameter for \\'Searchbar\\' constructor is not a valid option. Please refer to ' + 'the documentation.');\n    }\n    _classPrivateFieldSet(_assertThisInitialized(_this), _onSelected, (_geocodingOptions$onS = geocodingOptions.onSelected) !== null && _geocodingOptions$onS !== void 0 ? _geocodingOptions$onS : function () {});\n\n    // ---------- this.domElement SETTINGS SPECIFIC TO SEARCHBAR : ----------\n\n    _this.domElement.id = 'widgets-searchbar';\n    _this.domElement.style.height = 'auto';\n    var form = document.createElement('form');\n    form.setAttribute('autocomplete', 'off');\n    form.id = 'searchbar-autocompletion-form';\n    _this.domElement.appendChild(form);\n    var input = document.createElement('input');\n    input.setAttribute('type', 'text');\n    input.setAttribute('name', 'mySearch');\n    input.setAttribute('placeholder', options.placeholder || DEFAULT_OPTIONS.placeholder);\n    input.style.height = \"\".concat(options.height || options.size || DEFAULT_OPTIONS.height, \"px\");\n    input.style.fontSize = \"\".concat(options.fontSize || DEFAULT_OPTIONS.fontSize, \"px\");\n    form.appendChild(input);\n\n    // currentFocus variable stores the index of the suggestions that is focused by user, either with mouse or arrow\n    // keys.\n    var currentFocus;\n\n    // ----------  BUILD AUTOCOMPLETION SUGGESTIONS LIST WHEN TYPING THE SEARCHBAR INPUT : ----------\n\n    input.addEventListener('input', function () {\n      var value = input.value;\n\n      // Close any already opened list of autocompleted values\n      eraseSuggestionList(form);\n      currentFocus = -1;\n      if (!value) {\n        return false;\n      }\n      geocodingOptions.url.searchParams.set('text', value);\n      Fetcher.json(geocodingOptions.url).then(function (geocodingResult) {\n        var result = geocodingOptions.parser(geocodingResult);\n        var i = 0;\n        result.forEach(function (info, location) {\n          // Stop looping through the map if enough location have been proceeded.\n          if (i === Math.min(result.size, options.maxSuggestionNumber || DEFAULT_OPTIONS.maxSuggestionNumber)) {\n            return;\n          }\n          var mapIndex = i;\n          i++;\n          var index = location.toUpperCase().indexOf(value.toUpperCase());\n          if (index > -1) {\n            var autocompleteItem = document.createElement('div');\n            autocompleteItem.style.minHeight = input.style.height;\n            autocompleteItem.style.fontSize = \"\".concat(options.fontSize || DEFAULT_OPTIONS.fontSize, \"px\");\n\n            // Make the matching letters bold.\n            var start = location.slice(0, index);\n            var bold = location.slice(index, index + value.length);\n            var end = location.slice(index + value.length, location.length);\n            autocompleteItem.innerHTML = \"<p>\".concat(start, \"<strong>\").concat(bold, \"</strong>\").concat(end, \"</p>\");\n            // Store the current location value as an attribute of autocompleteItem div.\n            autocompleteItem.setAttribute('location', location);\n            form.appendChild(autocompleteItem);\n\n            // eslint-disable-next-line no-loop-func\n            autocompleteItem.addEventListener('mouseover', function () {\n              removeAllActives(form.children);\n              currentFocus = mapIndex;\n              autocompleteItem.classList.add('active');\n            });\n            autocompleteItem.addEventListener('click', function () {\n              _classPrivateFieldGet(_assertThisInitialized(_this), _onSelected).call(_assertThisInitialized(_this), info);\n              input.value = autocompleteItem.getAttribute('location');\n              eraseSuggestionList(form);\n            });\n          }\n        });\n      });\n    });\n\n    // ---------- MANAGE KEYBOARD INTERACTIONS ON AUTOCOMPLETION SUGGESTIONS : ----------\n\n    // When searchbar is positioned at the bottom of the screen (therefore is a flex with `column-reverse`\n    // direction, we must exchange up and down arrow actions.\n    var topOrBottom = (options.position || DEFAULT_OPTIONS.position).includes('top') ? 1 : -1;\n    input.addEventListener('keydown', function (event) {\n      event.stopPropagation();\n      var completionSuggestions = form.getElementsByTagName('div');\n      switch (event.code) {\n        case 'Escape':\n          eraseSuggestionList(form);\n          input.value = '';\n          view.domElement.focus();\n          break;\n        case 'ArrowDown':\n          event.preventDefault();\n          currentFocus = addActive(completionSuggestions, currentFocus + topOrBottom);\n          break;\n        case 'ArrowUp':\n          event.preventDefault();\n          currentFocus = addActive(completionSuggestions, currentFocus - topOrBottom);\n          break;\n        case 'Enter':\n          event.preventDefault();\n          if (completionSuggestions[Math.max(currentFocus, 0)]) {\n            completionSuggestions[Math.max(currentFocus, 0)].click();\n            view.domElement.focus();\n          }\n          break;\n        default:\n          break;\n      }\n    });\n\n    // ---------- MANAGE FOCUS AND ACTIVE SUGGESTION WHEN USER ENTERS OR LEAVES THE SEARCHBAR : ----------\n\n    // User clicks the searchbar.\n    input.addEventListener('focus', function () {\n      form.classList.add('focus');\n    });\n    // User clicks out of the searchbar.\n    input.addEventListener('blur', function () {\n      form.classList.remove('focus');\n      removeAllActives(form.children);\n    });\n    // Cursor leaves the searchbar.\n    form.addEventListener('mouseleave', function () {\n      removeAllActives(form.children);\n      currentFocus = -1;\n    });\n    return _this;\n  }\n  return _createClass(Searchbar);\n}(Widget);\nexport default Searchbar;","import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nimport Style from \"../../Core/Style\";\nimport { C3DTILES_LAYER_EVENTS } from \"../../Layer/C3DTilesLayer\";\nimport Widget from \"./Widget\";\nvar DEFAULT_OPTIONS = {\n  width: 200,\n  position: 'top-right'\n};\n\n/**\n * A widget for dynamic 3DTiles styling\n *\n * To use it, you need to link the widgets' stylesheet to your html webpage. This stylesheet is included in\n * [itowns bundles](https://github.com/iTowns/itowns/releases) if you downloaded them, or it can be found in\n * `node_modules/itowns/examples/css` if you installed iTowns with npm. Otherwise, it can be found at\n * [this link](https://raw.githubusercontent.com/iTowns/itowns/master/examples/css/widgets.css). See\n * [this example](http://www.itowns-project.org/itowns/examples/#widgets_3dtiles_style) for more details.\n *\n * @extends Widget\n *\n * @property    {HTMLElement}   domElement      An html div containing the minimap.\n * @property    {HTMLElement}   parentElement   The parent HTML container of `this.domElement`.\n */\nvar C3DTilesStyle = /*#__PURE__*/function (_Widget) {\n  _inherits(C3DTilesStyle, _Widget);\n  var _super = _createSuper(C3DTilesStyle);\n  /**\n     *\n     * @param {View} view view\n     * @param {*} options options\n     */\n  function C3DTilesStyle(view, options) {\n    var _this;\n    _classCallCheck(this, C3DTilesStyle);\n    _this = _super.call(this, view, options, DEFAULT_OPTIONS);\n    _this.domElement.onclick = function (event) {\n      return event.stopImmediatePropagation();\n    };\n\n    // create select of the C3DTilesLayers\n    var selectC3DTilesLayer = document.createElement('select');\n    _this.domElement.appendChild(selectC3DTilesLayer);\n\n    /** @type {Map<HTMLElement, HTMLElement>} */\n    var selectOptionLayerContent = new Map();\n    var updateSelectedLayer = function () {\n      var _iterator = _createForOfIteratorHelper(selectOptionLayerContent),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var _step$value = _slicedToArray(_step.value, 2),\n            sO = _step$value[0],\n            lC = _step$value[1];\n          lC.hidden = sO !== selectC3DTilesLayer.selectedOptions[0];\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    };\n    selectC3DTilesLayer.onchange = updateSelectedLayer;\n    view.getLayers().filter(function (el) {\n      return el.isC3DTilesLayer === true;\n    }).forEach(function (c3DTilesLayer) {\n      var selectC3DTilesLayerOption = document.createElement('option');\n      selectC3DTilesLayerOption.innerText = c3DTilesLayer.name;\n      selectC3DTilesLayer.add(selectC3DTilesLayerOption);\n      var layerContent = document.createElement('div');\n      _this.domElement.appendChild(layerContent);\n\n      // link select option to layer content\n      selectOptionLayerContent.set(selectC3DTilesLayerOption, layerContent);\n\n      // wait for C3DTileFeatures to load\n      c3DTilesLayer.addEventListener(C3DTILES_LAYER_EVENTS.ON_TILE_CONTENT_LOADED, function () {\n        // reset\n        while (layerContent.firstChild) {\n          layerContent.firstChild.remove();\n        }\n\n        /** @type {Map<string,Array>} */\n        var buffer = new Map(); // record what are the possible values for a key in batchTable\n        // eslint-disable-next-line no-unused-vars\n        var _iterator2 = _createForOfIteratorHelper(c3DTilesLayer.tilesC3DTileFeatures),\n          _step2;\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var _step2$value = _slicedToArray(_step2.value, 2),\n              tileId = _step2$value[0],\n              tileC3DTileFeatures = _step2$value[1];\n            // eslint-disable-next-line no-unused-vars\n            var _iterator6 = _createForOfIteratorHelper(tileC3DTileFeatures),\n              _step6;\n            try {\n              for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n                var _step6$value = _slicedToArray(_step6.value, 2),\n                  batchId = _step6$value[0],\n                  c3DTileFeature = _step6$value[1];\n                // eslint-disable-next-line guard-for-in\n                for (var key in c3DTileFeature.getInfo().batchTable) {\n                  if (!buffer.has(key)) {\n                    buffer.set(key, []);\n                  }\n\n                  // check possible value for this key\n                  var value = c3DTileFeature.getInfo().batchTable[key];\n                  if (!buffer.get(key).includes(value)) {\n                    buffer.get(key).push(value);\n                  }\n                }\n              }\n            } catch (err) {\n              _iterator6.e(err);\n            } finally {\n              _iterator6.f();\n            }\n          }\n\n          /** @type {Map<HTMLElement, Function>} */\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n        var colorFunctions = new Map();\n        var fillColorFunction = function fillColorFunction(c3DTileFeature) {\n          var result = null;\n          // eslint-disable-next-line no-unused-vars\n          var _iterator3 = _createForOfIteratorHelper(colorFunctions),\n            _step3;\n          try {\n            for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n              var _step3$value = _slicedToArray(_step3.value, 2),\n                keyValue = _step3$value[0],\n                colorFunction = _step3$value[1];\n              result = colorFunction(c3DTileFeature) || result;\n            }\n          } catch (err) {\n            _iterator3.e(err);\n          } finally {\n            _iterator3.f();\n          }\n          return result;\n        };\n\n        /** @type {Map<HTMLElement, Function>} */\n        var opacityFunctions = new Map();\n        var fillOpacityFunction = function fillOpacityFunction(c3DTileFeature) {\n          var result = 1;\n          // eslint-disable-next-line no-unused-vars\n          var _iterator4 = _createForOfIteratorHelper(opacityFunctions),\n            _step4;\n          try {\n            for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n              var _step4$value = _slicedToArray(_step4.value, 2),\n                keyValue = _step4$value[0],\n                opacityFunction = _step4$value[1];\n              result = opacityFunction(c3DTileFeature) || result;\n            }\n          } catch (err) {\n            _iterator4.e(err);\n          } finally {\n            _iterator4.f();\n          }\n          return result;\n        };\n        var appendInputColorAndOpacity = function appendInputColorAndOpacity(getKeyValue, key, possibleValues) {\n          var inputColor = document.createElement('input');\n          inputColor.setAttribute('type', 'color');\n          layerContent.appendChild(inputColor);\n          inputColor.onchange = function () {\n            var keyValue = getKeyValue();\n            if (!possibleValues.includes(keyValue)) {\n              return;\n            }\n            var colorSelected = inputColor.value; // copy\n            colorFunctions.set(keyValue, function (c3DTileFeature) {\n              if (c3DTileFeature.getInfo().batchTable[key] == keyValue) {\n                return colorSelected;\n              }\n              return null;\n            });\n            c3DTilesLayer.updateStyle();\n            view.notifyChange();\n          };\n          var opacityElement = document.createElement('input');\n          opacityElement.setAttribute('type', 'range');\n          opacityElement.min = 0;\n          opacityElement.max = 1;\n          opacityElement.step = 0.1;\n          opacityElement.value = 1;\n          layerContent.appendChild(opacityElement);\n          opacityElement.onchange = function () {\n            var keyValue = getKeyValue();\n            if (!possibleValues.includes(keyValue)) {\n              return;\n            }\n            var opacitySelected = opacityElement.value; // copy\n            opacityFunctions.set(keyValue, function (c3DTileFeature) {\n              if (c3DTileFeature.getInfo().batchTable[key] == keyValue) {\n                return opacitySelected;\n              }\n              return null;\n            });\n            c3DTilesLayer.updateStyle();\n            view.notifyChange();\n          };\n          return {\n            inputColor: inputColor,\n            opacityElement: opacityElement\n          };\n        };\n        var appendFilterSelect = function appendFilterSelect(key, values) {\n          var label = document.createElement('label');\n          label.innerText = key;\n          layerContent.appendChild(label);\n          var selectKey = document.createElement('select');\n          layerContent.appendChild(selectKey);\n          values.forEach(function (value) {\n            var selectKeyOption = document.createElement('option');\n            selectKeyOption.value = value;\n            selectKeyOption.text = value;\n            selectKey.add(selectKeyOption);\n          });\n          appendInputColorAndOpacity(function () {\n            return selectKey.selectedOptions[0].value;\n          }, key, values);\n        };\n        var appendFilterInputText = function appendFilterInputText(key, values) {\n          var label = document.createElement('label');\n          label.innerText = key;\n          layerContent.appendChild(label);\n          var inputText = document.createElement('input');\n          inputText.setAttribute('type', 'text');\n          layerContent.appendChild(inputText);\n          var _appendInputColorAndO = appendInputColorAndOpacity(function () {\n              return inputText.value;\n            }, key, values),\n            inputColor = _appendInputColorAndO.inputColor,\n            opacityElement = _appendInputColorAndO.opacityElement;\n          inputText.onchange = function () {\n            if (!values.includes(inputText.value)) {\n              return;\n            }\n            var colorSelected = inputColor.value; // copy\n            var textSelected = inputText.value; // copy\n            colorFunctions.set(textSelected, function (c3DTileFeature) {\n              if (c3DTileFeature.getInfo().batchTable[key] == textSelected) {\n                return colorSelected;\n              }\n              return null;\n            });\n            var opacitySelected = opacityElement.value; // copy\n            opacityFunctions.set(textSelected, function (c3DTileFeature) {\n              if (c3DTileFeature.getInfo().batchTable[key] == textSelected) {\n                return opacitySelected;\n              }\n              return null;\n            });\n            c3DTilesLayer.updateStyle();\n            view.notifyChange();\n          };\n        };\n\n        // create ui from buffer\n        var _iterator5 = _createForOfIteratorHelper(buffer),\n          _step5;\n        try {\n          for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n            var _step5$value = _slicedToArray(_step5.value, 2),\n              _key = _step5$value[0],\n              values = _step5$value[1];\n            if (values.length < C3DTilesStyle.MAX_SELECT_VALUE) {\n              appendFilterSelect(_key, values);\n            } else {\n              appendFilterInputText(_key, values);\n            }\n          }\n\n          // set style\n        } catch (err) {\n          _iterator5.e(err);\n        } finally {\n          _iterator5.f();\n        }\n        c3DTilesLayer.style = new Style({\n          fill: {\n            color: fillColorFunction,\n            opacity: fillOpacityFunction\n          }\n        });\n      });\n    });\n    updateSelectedLayer();\n    return _this;\n  }\n  _createClass(C3DTilesStyle, null, [{\n    key: \"MAX_SELECT_VALUE\",\n    get: function get() {\n      return 10;\n    }\n  }]);\n  return C3DTilesStyle;\n}(Widget);\nexport default C3DTilesStyle;"],"names":["root","factory","exports","module","define","amd","self","_display","WeakMap","Widget","view","obj","privateMap","value","options","arguments","length","undefined","defaultOptions","this","writable","privateCollection","has","TypeError","_checkPrivateRedeclaration","set","parentElement","domElement","position","includes","console","warn","concat","document","createElement","appendChild","style","width","size","height","positionArray","split","classList","add","left","offsetWidth","top","offsetHeight","translate","transform","x","y","addEventListener","e","stopPropagation","key","display","window","getComputedStyle","_classPrivateMethodInitSpec","privateSet","_classPrivateMethodGet","receiver","fn","DEFAULT_OPTIONS","displayCompass","display3DToggle","displayZoomIn","displayZoomOut","animationDuration","direction","DEFAULT_BUTTONS","id","content","info","parentId","_view","_action","WeakSet","_addDefaultButton","_action2","params","time","controls","lookAtCoordinate","_addDefaultButton2","settings","onclick","addButton","_Widget","Navigation","Derived","hasNativeReflectConstruct","_super","Reflect","construct","sham","Proxy","Boolean","prototype","valueOf","call","_isNativeReflectConstruct","result","Super","NewTarget","constructor","apply","_options$displayCompa","_options$display3DTog","_options$displayZoomI","_options$displayZoomO","_this","isGlobeView","Error","compass","heading","tilt","CAMERA_MOVED","event","toggle3D","getTilt","innerHTML","zoomIn","zoom","Math","min","getZoom","zoomOut","max","_this2","title","buttonBar","getElementById","addButtonBar","button","className","tabIndex","activeElement","focus","minScale","maxScale","zoomRatio","Minimap","layer","isColorLayer","cursor","cursorWrapper","HTMLElement","PlanarView","source","extent","camera","type","ORTHOGRAPHIC","placement","noControls","maxSubdivisionLevel","tileLayer","disableFocusOnStart","addLayer","preventDefault","camera3D","initialScale","getScale","pitch","minZoom","maxZoom","mainViewCoordinates","Coordinates","referenceCrs","viewCoordinates","targetPosition","getCameraTargetPosition","addFrameRequester","AFTER_RENDER","distance","distanceTo","scale","getScaleFromDistance","updateProjectionMatrix","setFromVector3","as","updateMatrixWorld","notifyChange","Scale","GLOBE_INITIALIZED","update","RANGE_CHANGED","isPlanarView","INITIALIZED","MOVED","metricDistance","round","getPixelsToMeters","digit","pow","toString","pixelDistance","getMetersToPixels","unit","maxSuggestionNumber","fontSize","placeholder","addActive","htmlElements","index","_htmlElements$index","removeAllActives","i","remove","eraseSuggestionList","form","children","removeChild","lastChild","_onSelected","Searchbar","geocodingOptions","_geocodingOptions$onS","url","parser","onSelected","setAttribute","currentFocus","input","searchParams","Fetcher","json","then","geocodingResult","forEach","location","mapIndex","toUpperCase","indexOf","autocompleteItem","minHeight","start","slice","bold","end","getAttribute","topOrBottom","completionSuggestions","getElementsByTagName","code","click","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","minLen","_arrayLikeToArray","n","Object","name","from","test","_unsupportedIterableToArray","F","s","done","_e","f","err","normalCompletion","didErr","step","next","_e2","arr","len","arr2","C3DTilesStyle","stopImmediatePropagation","selectC3DTilesLayer","selectOptionLayerContent","Map","updateSelectedLayer","_step","_iterator","_step$value","sO","hidden","selectedOptions","onchange","getLayers","filter","el","isC3DTilesLayer","c3DTilesLayer","selectC3DTilesLayerOption","innerText","layerContent","ON_TILE_CONTENT_LOADED","firstChild","_step2","buffer","_iterator2","tilesC3DTileFeatures","_step6","_step2$value","_iterator6","_step6$value","c3DTileFeature","getInfo","batchTable","get","push","_step5","colorFunctions","opacityFunctions","appendInputColorAndOpacity","getKeyValue","possibleValues","inputColor","keyValue","colorSelected","updateStyle","opacityElement","opacitySelected","appendFilterSelect","values","label","selectKey","selectKeyOption","text","appendFilterInputText","inputText","_appendInputColorAndO","textSelected","_iterator5","_step5$value","_key","MAX_SELECT_VALUE","Style","fill","color","_step3","_iterator3","_step3$value","colorFunction","opacity","_step4","_iterator4","_step4$value","opacityFunction"],"sourceRoot":""}